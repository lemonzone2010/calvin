<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:w="http://www.apusic.com/jsf/widget" xmlns:layout="http://www.apusic.com/jsf/layout"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ajax="http://www.apusic.com/jsf/ajax"
	xmlns:c="http://java.sun.com/jstl/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	renderKitId="AJAX" xmlns:om="http://www.apusic.com/jsf/misc"
	xmlns:ebiz="http://www.apusic.com/framework-web">
	<w:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="/ebiz-resource/md/css/common.css" type="text/css" />
		<link rel="stylesheet" type="text/css" href="/ebiz-resource/md/css/_common.css" />
		<link rel="stylesheet" href="/ebiz-resource/md/css/nav/navigation.css" type="text/css" />
		<script src="/ebiz-resource/js/jquery/jquery.js" type="text/javascript" />
		<script src="/ebiz-resource/js/jquery/ui/jquery.ui.core.js" type="text/javascript"></script>
		<script src="/ebiz-resource/js/jquery/ui/jquery.ui.widget.js" type="text/javascript"></script>
		<script src="/ebiz-resource/js/jquery/ui/jquery.ui.mouse.js" type="text/javascript"></script>
		<script src="/ebiz-resource/js/jquery/ui/jquery.ui.sortable.js" type="text/javascript"></script>
		<script src="/ebiz-resource/md/js/nav/applicationInfo.js" type="text/javascript" />
	</w:head>
	<w:page title="应用管理">
		<div id="man_zone">
		<w:form id="infoFrom">
			<div class="actionBar">
				<div class="actionItems" style="height: 28px;">
					<span class="sysiconBtn" onclick="add()">新增应用</span>
				</div>
			</div>
			<div class="clear"></div>
			<div class="finder-head row_height">
				<div class="span-1">序号</div>
				<div class="span-4">名称</div>
				<div class="span-3">状态</div>
				<div class="span-7">操作</div>
				<div class="span-2">拖动排序</div>
			</div>
			<ajax:updater id="dataUpdateInfo">
				<div class="main_content">
					<div class="finder">
						<div class="finder-list">
							<div class="row" id="add_info" style="display: none;">
								<div class="row-line">
							  		<div class="span-1">&#160;</div>
							  		<div class="span-4"><input id="new_name" size="16" /></div>
							  		<div class="span-3">启用</div>
							  		<div class="span-7">
							  			<input class="input_button" type="button" value="保存" onclick="addBefore('0');save();" /> 
							  			<input class="input_button" type="button" value="取消" onclick="cancel()" /> 
							  			<input type="hidden" name="appId" /> 
							  			<input type="hidden" name="applicationName" /> 
							  			<input type="hidden" name="status" />
							  			<input type="hidden" name="sequence" />
							  		</div>
							  	</div>
							</div>
							<div id="date_info">
								<c:forEach items="#{menu.applicationManageBean.apps}" var="app" varStatus="status_info">
								  	<div class="row" id="data_info_#{app.id}">
								  		<div class="row-line">
								  			<input type="hidden" name="appSortSequence" value="#{app.sequence}"/>
								  			<input type="hidden" name="appSortId" value="#{app.id}"/>
								  			<div class="span-1" id="index_#{app.id}">#{status_info.index+1}</div>
								  			<div class="span-4" id="name_#{app.id}">#{app.applicationName}</div>
								  			<c:choose>
												<c:when test="#{app.status eq 'Y'}">
													<div class="span-3" id="status_#{app.id}">启用</div>
													<div class="span-7"><input class="input_button" type="button" value="修改" onclick="edit('#{app.id}')" /> 
														<input class="input_button" type="button" value="保存" onclick="updateBefore('#{app.id}');save();" style="display: none;" /> 
														<input class="input_button" type="button" value="取消" onclick="recover('#{app.id}')" style="display: none;" /> 
														<input class="input_button" type="button" value="禁用" onclick="disable('#{app.id}')" /> 
														<input class="input_button" type="button" value="删除" onclick="deleteItem('#{app.id}')" />
													</div>
												</c:when>
												<c:otherwise>
													<div id="status_#{app.id}" class="span-3">禁用</div>
													<div class="span-7"><input class="input_button" type="button" value="修改" onclick="edit('#{app.id}')" /> 
														<input class="input_button" type="button" value="保存" onclick="updateBefore('#{app.id}');save()" style="display: none;" /> 
														<input class="input_button" type="button" value="取消" onclick="recover('#{app.id}')" style="display: none;" /> 
														<input class="input_button" type="button" value="启用" onclick="enable('#{app.id}')" /> 
														<input class="input_button" type="button" value="删除" onclick="deleteItem('#{app.id}')" />
													</div>
												</c:otherwise>
											</c:choose>
											<div class="span-2"><a title="拖动排序" alt="拖动排序" class="sort_icon" onmousedown="sortEnable()" onmouseup="sortDisable()"></a></div>
								  		</div>
								  	</div>
								</c:forEach>
							</div>
						</div>
					</div>
				</div>
			</ajax:updater>
			<ajax:submitAction action="#{menu.applicationManageBean.saveOrUpdate}" jsvar="saveOrUpdate" />
			<ajax:submitAction action="#{menu.applicationManageBean.enable}" jsvar="enable_b" />
			<ajax:submitAction action="#{menu.applicationManageBean.disable}" jsvar="disable_b" />
			<ajax:submitAction action="#{menu.applicationManageBean.delete}" jsvar="delete_b" />
			<ajax:submitAction action="#{menu.applicationManageBean.queryData}" jsvar="queryData" />
			<ajax:submitAction action="#{menu.applicationManageBean.move}" jsvar="updateSerialNumber" />
		</w:form>
		</div>

	</w:page>
</f:view>