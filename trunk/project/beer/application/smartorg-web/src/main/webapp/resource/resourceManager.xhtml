<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:w="http://www.apusic.com/jsf/widget" xmlns:layout="http://www.apusic.com/jsf/layout"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ajax="http://www.apusic.com/jsf/ajax"
	xmlns:nsec="http://www.nsec.com" xmlns:om="http://www.apusic.com/jsf/misc"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jstl/core" renderKitId="AJAX"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:ebiz="http://www.apusic.com/framework-web">

	<ui:decorate template="/template/ebiz_smartorg_template.xhtml">
		<ui:param name="title" value="资源管理"></ui:param>
		<ui:define name="content">
			<w:form>
			<layout:panelGrid columns="5">
				<f:verbatim>资源名：</f:verbatim>
				<w:textField id="resourceName" />
				<f:verbatim>所属工程：</f:verbatim>
				<w:combo id="type">
					<f:selectItem itemLabel="usersphere" itemValue="usersphere" />
					<f:selectItem itemLabel="emarket" itemValue="emarket" />
					<f:selectItem itemLabel="smartorg" itemValue="smartorg" />
					<f:selectItem itemLabel="navigation" itemValue="navigation" />
					<f:selectItem itemLabel="orderbook" itemValue="orderbook" />
				</w:combo>
				<w:button id="search" label="搜索" />            
			</layout:panelGrid>
			<w:dataGrid id="resourceGrid" paged="true" rows="10" height="500" width="80%" toolBarPosition="bottom">
				<w:toolBar>
					<w:button id="addResource" value="添加" />
					<w:button id="updateResouce" value="修改" />
					<w:button id="deleteResouce" value="删除" onclick="if(confirm('确认是否删除你选择的资源')){return true;}else{return false;}"/>
					<w:button id="showSelectRoleWindows" value="授权" />
					<w:button id="showCancelRoleWindows" value="取消授权" />
					<w:button id="active" value="激活" tooltip="如果不激活，你所修改的授权需要等到下次重启" />
				</w:toolBar>
				<w:pagingToolbar displayInfo="true" displayMsg="显示 {0} - {1}，共 {2} 条" />
			</w:dataGrid>
		</w:form>

		<layout:window id="addResourceWindows" width="400" height="280" modal="true" resizable="false" title="添加资源">
				<w:form id="addResourceWindowsForm">
					<table>
						<tr><td><h:outputLabel value="资源名:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resName}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resValue}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源类型:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resType}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源级别:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.priority}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源所属工程:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resContext}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源描述:" /></td><td><w:textArea value="#{resource.resourceManagerBean.uiResource.desc}" height="50" width="200"/></td></tr>
						<tr><td><w:button style="margin-right: 10px" label="添加" id="submitAddResource" alwaysSubmit="true"/></td>
							<td><w:button label="关闭" id="closeAddRsourceWindows" immediate="true"/></td></tr>
					</table>
				</w:form>
		</layout:window>

		<layout:window id="updateResourceWindow" width="400" height="280" modal="true" resizable="false" title="修改资源">
				<w:form id="updateResourceForm">
					<table>
						<tr><td colspan="2"><w:textField  hidden="true" value="#{resource.resourceManagerBean.uiResource.id}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源名:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resName}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resValue}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源类型:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resType}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源级别:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.priority}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源所属工程:" /></td><td><w:textField value="#{resource.resourceManagerBean.uiResource.resContext}" required="true"/></td></tr>
						<tr><td><h:outputLabel value="资源描述:" /></td><td><w:textArea value="#{resource.resourceManagerBean.uiResource.desc}" height="50" width="200"/></td></tr>
						<tr><td><w:button style="margin-right: 10px" label="添加" id="submitUpdateResource" alwaysSubmit="true"/></td>
							<td><w:button label="关闭" id="closeUpdateResourceWindow" immediate="true"/></td></tr>
					</table>
				</w:form>
		</layout:window>

		<layout:window id="selectRoleWindows" width="300" height="280" modal="true" resizable="false" title="授权" autoScroll="true">
			<w:form id="selectRoleForm">
				<ebiz:simpleTree id="addRole" init="#{component.roleTreeBean.getRoles}" click="if(confirm('确认将这些资源授给该角色?')){selectRole.addParam('roleName',addRole.getSelectedNode().id);selectRole.submit();};"></ebiz:simpleTree>
			</w:form>
			<ajax:submitAction id="selectRole" jsvar="selectRole"></ajax:submitAction>
		</layout:window>

		<layout:window id="cancelRoleWindow" width="300" height="280" modal="true" resizable="false" title="取消授权" autoScroll="true">
			<w:form id="cancelRoleForm">
				<ebiz:simpleTree id="canelRoleTree" init="#{component.roleTreeBean.getRoles}" click="if(confirm('确认将这些资源授从该角色移除?')){canelRole.addParam('roleName',canelRoleTree.getSelectedNode().id);canelRole.submit();};"></ebiz:simpleTree>
			</w:form>
			<ajax:submitAction id="canelRole" jsvar="canelRole"></ajax:submitAction>
		</layout:window>
		</ui:define>
	</ui:decorate>
</f:view>